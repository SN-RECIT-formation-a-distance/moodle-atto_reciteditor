YUI.add("moodle-atto_reciteditor-button",function(e,t){e.namespace("M.atto_reciteditor").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({title:"htmleditor",icon:"html",iconComponent:"atto_reciteditor",callback:this.openHtmlEditor,buttonName:"htmleditor"})},openHtmlEditor:function(e){var r,t,i;e.preventDefault(),r=this,e=M.cfg.wwwroot,e+="/lib/editor/atto/plugins/reciteditor/build/index.php",((t=window.open(e,"Éditeur RÉCIT","scrollbars=1")).outerWidth<screen.availWidth||t.outerHeight<screen.availHeight)&&(t.moveTo(0,0),t.resizeTo(screen.availWidth,screen.availHeight)),t.attoInterface={},t.attoInterface.getSettings=function(){var e={};return e.contextid=M.cfg.contextid,e.wwwroot=M.cfg.wwwroot,e.theme=M.cfg.theme,e.themerev=M.cfg.themerev,e.sesskey=M.cfg.sesskey,e},i=[],t.attoInterface.getThemeCssRules=function(){var e,t,o=window.document.styleSheets;if(0<i.length)return i;i=[];for(e of o)if(e.href===`${M.cfg.wwwroot}/theme/styles.php/${M.cfg.theme}/${M.cfg.themerev}_1/all`||"theme-recit-custom-css"===e.title)for(t of e.rules)i.push(t);return i},t.attoInterface.getThemeUrl=function(){return`${M.cfg.wwwroot}/theme/styles.php/${M.cfg.theme}/${M.cfg.themerev}_1/all`},t.attoInterface.getFileTransferData=function(){var e,t=r.get("host"),o=t.get("filepickeroptions").image||{},i={repo_id:0};for(e in i.client_id=o.client_id||0,i.env=o.env||"",i.license=o.defaultlicense||"",i.itemid=o.itemid||0,i.author=o.author||"",e="",o.repositories)if("upload"===o.repositories[e].type){i.repo_id=o.repositories[e].id;break}for(e in o.licenses)if("cc"===o.licenses[e].shortname){i.license=o.licenses[e].shortname;break}return i},t.attoInterface.getContent=function(){return r.editor.getHTML()},t.attoInterface.setContent=function(e){r.editor.setHTML(e),t.close()}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});