YUI.add("moodle-atto_reciteditor-button",function(e,t){e.namespace("M.atto_reciteditor").Button=e.Base.create("button",e.M.editor_atto.EditorPlugin,[],{initializer:function(){this.addButton({title:"htmleditor",icon:"html",iconComponent:"atto_reciteditor",callback:this.openHtmlEditor,buttonName:"htmleditor"})},openHtmlEditor:function(e){var i,t,r,o,n;for(o in e.preventDefault(),i=this,t=M.cfg.wwwroot,t+="/lib/editor/atto/plugins/reciteditor/build/index.php",t+="?contextid="+M.cfg.contextid,t+="&theme="+M.cfg.theme,t+="&themerev="+M.cfg.themerev,r=this.get("host").get("filepickeroptions").image||{},M.recit.attoFileTransfer={},M.recit.attoFileTransfer.repo_id=0,M.recit.attoFileTransfer.client_id=r.client_id||0,M.recit.attoFileTransfer.env=r.env||"",M.recit.attoFileTransfer.license=r.defaultlicense||"",M.recit.attoFileTransfer.itemid=r.itemid||0,M.recit.attoFileTransfer.author=r.author||"",o="",r.repositories)if("upload"===r.repositories[o].type){M.recit.attoFileTransfer.repo_id=r.repositories[o].id;break}for(o in r.licenses)if("cc"===r.licenses[o].shortname){M.recit.attoFileTransfer.license=r.licenses[o].shortname;break}((n=window.open(t,"Éditeur RÉCIT","scrollbars=1")).outerWidth<screen.availWidth||n.outerHeight<screen.availHeight)&&(n.moveTo(0,0),n.resizeTo(screen.availWidth,screen.availHeight)),n.getEditorContent=function(){return i.editor.getHTML()},n.onSave=function(e){var t=e.body.outerHTML;i.editor.setHTML(t),n.close()}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});